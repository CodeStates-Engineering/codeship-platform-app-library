{"version":3,"file":"index-1393e9cf.js","sources":["../../../src/components/molecules/FloatingModal/index.tsx"],"sourcesContent":["import type { ReactNode } from 'react';\nimport { createContext, useState } from 'react';\n\nimport { useMountedEffect } from '@hooks';\nimport { cleanClassName } from '@utils';\n\nimport styles from './index.module.scss';\n\ninterface CommonProps {\n  children?: ReactNode;\n  className?: string;\n}\n\ninterface FloatingModalProps\n  extends CommonProps,\n    Pick<\n      React.DetailedHTMLProps<\n        React.FormHTMLAttributes<HTMLFormElement>,\n        HTMLFormElement\n      >,\n      'onSubmit'\n    > {\n  opened?: boolean;\n  onClose?: () => void;\n}\n\nconst FloatingModalContext = createContext<(() => void) | undefined>(undefined);\nconst FloatingModalBody = ({ children, className }: CommonProps) => (\n  <section\n    className={cleanClassName(`${styles['floating-modal-items']} ${className}`)}\n  >\n    {children}\n  </section>\n);\n\ninterface FloatingModalTailProps {\n  children: ReactNode;\n  className?: string;\n  border?: boolean;\n}\nconst FloatingModalTail = ({\n  children,\n  className,\n  border = true,\n}: FloatingModalTailProps) => (\n  <div\n    className={`${styles['floating-modal-tail']} ${\n      border && styles['with-border']\n    } ${className}`}\n  >\n    {children}\n  </div>\n);\n\nconst FloatingModalMain = ({\n  children,\n  className,\n  opened,\n  onClose,\n}: FloatingModalProps) => {\n  const [floatState, setFloatState] = useState<'open' | 'closing' | 'closed'>(\n    'closed',\n  );\n\n  const commonProps = {\n    className: cleanClassName(\n      `${styles[`floating-modal-container`]} ${\n        styles[floatState]\n      } ${className}`,\n    ),\n    children: (\n      <FloatingModalContext.Provider value={onClose}>\n        {children}\n      </FloatingModalContext.Provider>\n    ),\n  };\n\n  useMountedEffect(() => {\n    if (opened) {\n      setFloatState('open');\n    } else {\n      setFloatState('closing');\n      const delayClose = setTimeout(() => setFloatState('closed'), 500);\n      return () => clearTimeout(delayClose);\n    }\n  }, [opened]);\n\n  return (\n    <>\n      {floatState === 'closed' ? null : <FloatingModalBody {...commonProps} />}\n    </>\n  );\n};\n\nexport const FloatingModal = Object.assign(FloatingModalMain, {\n  Body: FloatingModalBody,\n  Tail: FloatingModalTail,\n});\n"],"names":["FloatingModalContext","createContext","FloatingModalBody","children","className","jsx","cleanClassName","styles","FloatingModalTail","border","FloatingModalMain","opened","onClose","floatState","setFloatState","useState","commonProps","useMountedEffect","delayClose","Fragment","FloatingModal"],"mappings":"ixCA0BAA,EAAAC,EAAAA,cAAA,MAAA,EACAC,EAAA,CAAA,CAAA,SAAAC,EAAA,UAAAC,CAAA,IAAAC,EAAA,IACE,UAAC,CAAA,UAAAC,EAAA,GAAAC,EAAA,sBAAA,KAAAH,GAAA,EAC2E,SAAAD,CAEzE,CACH,EAQFK,EAAA,CAAA,CAA2B,SAAAL,EACzB,UAAAC,EACA,OAAAK,EAAA,EAEF,IAAAJ,EAAA,IACE,MAAC,CAAA,UAAA,GAAAE,EAAA,qBAAA,KAAAE,GAAAF,EAAA,aAAA,KAAAH,IAGK,SAAAD,CAEH,CACH,EAGFO,EAAA,CAAA,CAA2B,SAAAP,EACzB,UAAAC,EACA,OAAAO,EACA,QAAAC,CAEF,IAAA,CACE,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAoC,QAClC,EAGFC,EAAA,CAAoB,UAAAV,EACP,GAAAC,EAAA,0BAAA,KAAAA,EAAAM,CAAA,KAAAT,GAGL,EACN,SAAAC,EAAA,IAAAL,EAAA,SAAA,CAAA,MAAAY,EAAA,SAAAT,EAAA,CAIE,EAIJ,OAAAc,EAAA,IAAA,CACE,GAAAN,EACEG,EAAA,MAAA,MAAoB,CAEpBA,EAAA,SAAA,EACA,MAAAI,EAAA,WAAA,IAAAJ,EAAA,QAAA,EAAA,GAAA,EACA,MAAA,IAAA,aAAAI,CAAA,EACF,EAAA,CAAAP,CAAA,CAAA,EAGFN,EAAA,IAAAc,EAAA,SAAA,CAAA,SAAAN,IAAA,SAAA,KAAAR,EAAAA,IAAAH,EAAA,CAAA,GAAAc,CAAA,CAAA,CAAA,CAAA,CAKF,EAEOI,EAAA,OAAA,OAAAV,EAAA,CAAuD,KAAAR,EACtD,KAAAM,CAER,CAAA"}