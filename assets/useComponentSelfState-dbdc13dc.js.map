{"version":3,"file":"useComponentSelfState-dbdc13dc.js","sources":["../../../src/hooks/useMountedLayoutEffect.tsx","../../../src/hooks/useComponentSelfState.tsx"],"sourcesContent":["import { useRef } from 'react';\n\nimport { Compatibility } from '../plugins';\n\nexport function useMountedLayoutEffect(\n  effect: React.EffectCallback,\n  deps?: React.DependencyList | undefined,\n) {\n  const isMounted = useRef(false);\n  Compatibility.useLayoutEffect(\n    isMounted.current\n      ? effect\n      : () => {\n          isMounted.current = true;\n        },\n    deps,\n  );\n}\n","import { useState as createState } from 'react';\n\nimport { useMountedLayoutEffect as createMountedLayoutEffect } from './useMountedLayoutEffect';\n\nexport function useComponentSelfState<T>(\n  initialState: T,\n  onlyUpdatedByParent?: boolean,\n  dependencies?: React.DependencyList,\n): [T, React.Dispatch<React.SetStateAction<T>> | undefined] {\n  if (onlyUpdatedByParent) {\n    return [initialState, undefined];\n  }\n\n  const state = createState(initialState);\n  createMountedLayoutEffect(\n    () => state[1](initialState),\n    dependencies || [initialState],\n  );\n\n  return state;\n}\n"],"names":["useMountedLayoutEffect","effect","deps","isMounted","useRef","Compatibility","useComponentSelfState","initialState","onlyUpdatedByParent","dependencies","state","createState","createMountedLayoutEffect"],"mappings":"gFAIgB,SAAAA,EACdC,EACAC,EACA,CACM,MAAAC,EAAYC,SAAO,EAAK,EAChBC,EAAA,gBACZF,EAAU,QACNF,EACA,IAAM,CACJE,EAAU,QAAU,EACtB,EACJD,CAAA,CAEJ,CCbgB,SAAAI,EACdC,EACAC,EACAC,EAC0D,CAC1D,GAAID,EACK,MAAA,CAACD,EAAc,MAAS,EAG3B,MAAAG,EAAQC,WAAYJ,CAAY,EACtCK,OAAAA,EACE,IAAMF,EAAM,CAAC,EAAEH,CAAY,EAC3BE,GAAgB,CAACF,CAAY,CAAA,EAGxBG,CACT"}