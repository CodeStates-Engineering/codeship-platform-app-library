{"version":3,"file":"index-3a226437.js","sources":["../../../src/components/molecules/File/index.tsx"],"sourcesContent":["import { useRef } from 'react';\nimport { X } from 'react-feather';\n\nimport styles from './index.module.scss';\nimport {\n  useSubscribedState,\n  useTypography,\n  useValidation,\n} from '../../../hooks';\nimport { cleanClassName } from '../../../utils';\nimport { Button, Label, Input } from '../../atoms';\n\nimport type { Validation, Typography } from '../../../hooks';\nimport type {\n  ButtonProps,\n  InputProps,\n  InputWrapProps,\n  LabelContainerProps,\n} from '../../atoms';\n\ninterface SavedFile {\n  name: string;\n  url: string;\n}\n\nexport interface FileProps extends Pick<ButtonProps, 'className'> {\n  children?: React.ReactNode;\n  value?: SavedFile;\n  onChange?: (file?: File) => void;\n  download?: boolean;\n  disabled?: InputProps['disabled'];\n  accept?: string;\n  validation?: Validation<FileProps['value']>;\n  validationSpace?: boolean;\n  label?: string;\n  id?: string;\n  inputStyle?: {\n    size?: 'small' | 'medium' | 'large';\n  } & Pick<InputWrapProps, 'borderRadius' | 'width'> &\n    Typography;\n  labelStyle?: Pick<LabelContainerProps, 'direction'> & Typography;\n  readonly?: boolean;\n}\n\nexport const File = ({\n  children,\n  value,\n  onChange,\n  className,\n  download = true,\n  disabled = false,\n  accept,\n  validation,\n  validationSpace,\n  label,\n  id,\n  labelStyle,\n  inputStyle,\n  readonly = false,\n}: FileProps) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const [savedFile, setSavedFile] = useSubscribedState(value);\n\n  const { fontSizeClassName, fontWeightClassName } = useTypography(\n    inputStyle?.fontSize,\n    inputStyle?.fontWeight,\n  );\n\n  const isDownloadActive = !disabled;\n  const fileDeleteEnabled = !disabled && !readonly;\n\n  const { validationMessage, checkValidation } = useValidation(\n    value,\n    validation,\n    label || id,\n  );\n\n  const FileInput = (\n    <input\n      type=\"file\"\n      className={styles['file-input']}\n      ref={inputRef}\n      accept={accept}\n      disabled={!!disabled}\n      onChange={({ target: { files } }) => {\n        const file = files?.[0];\n        if (file) {\n          const savedFile = { name: file.name, url: URL.createObjectURL(file) };\n          onChange?.(file);\n          checkValidation?.(savedFile);\n          setSavedFile?.(savedFile);\n        }\n      }}\n    />\n  );\n\n  return (\n    <Input.Container\n      validationMessage={validationMessage}\n      validationSpace={validationSpace}\n      className={className}\n    >\n      <Label.Container direction={labelStyle?.direction}>\n        {label ? (\n          <Label\n            htmlFor={label}\n            fontSize={labelStyle?.fontSize}\n            fontWeight={labelStyle?.fontWeight}\n          >\n            {label}\n          </Label>\n        ) : null}\n        {savedFile ? (\n          <Input.Wrap\n            borderRadius={inputStyle?.borderRadius}\n            className={styles['download-link-interaction']}\n            size={inputStyle?.size}\n            width={inputStyle?.width}\n          >\n            <a\n              href={isDownloadActive ? savedFile?.url : undefined}\n              className={cleanClassName(\n                `${styles['download-link']} ${styles[fontSizeClassName]} ${\n                  styles[fontWeightClassName]\n                } ${isDownloadActive ? styles.actived : styles.disabled} ${\n                  readonly && styles['read-only']\n                }`,\n              )}\n              download={download}\n            >\n              {savedFile?.name}\n            </a>\n            {fileDeleteEnabled ? (\n              <Button\n                icon={<X size=\"1em\" />}\n                size=\"small\"\n                shape=\"round\"\n                theme=\"bluish-gray700/0\"\n                onClick={() => {\n                  setSavedFile?.(undefined);\n                  onChange?.(undefined);\n                  const { current } = inputRef;\n                  if (current) {\n                    current.value = '';\n                  }\n                }}\n              />\n            ) : (\n              FileInput\n            )}\n          </Input.Wrap>\n        ) : (\n          <Button\n            size={inputStyle?.size}\n            className={styles['upload-button']}\n            fontSize={inputStyle?.fontSize}\n            fontWeight={inputStyle?.fontWeight}\n            disabled={!!disabled}\n            theme=\"bluish-gray400/bluish-gray10/bluish-gray200\"\n            onClick={() => inputRef.current?.click()}\n            width={inputStyle?.width}\n          >\n            {children}\n            {disabled ? null : FileInput}\n          </Button>\n        )}\n      </Label.Container>\n    </Input.Container>\n  );\n};\n"],"names":["File","children","value","onChange","className","download","disabled","accept","validation","validationSpace","label","id","labelStyle","inputStyle","readonly","inputRef","useRef","savedFile","setSavedFile","useSubscribedState","fontSizeClassName","fontWeightClassName","useTypography","isDownloadActive","fileDeleteEnabled","validationMessage","checkValidation","useValidation","FileInput","jsx","styles","files","file","savedFile2","Input","jsxs","Label","cleanClassName","Button","X","current","_a"],"mappings":"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"}